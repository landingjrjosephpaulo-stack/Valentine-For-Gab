<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Will You Be My Valentine?</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  background: linear-gradient(135deg, #ff9a9e, #fad0c4);
  font-family: 'Playfair Display', serif;
  overflow-x: hidden;
  color: #5a1a2c;
}

/* Falling Hearts */
.heart {
  position: fixed;
  top: -10px;
  font-size: 20px;
  animation: fall linear infinite;
  color: rgba(255,255,255,0.7);
}
@keyframes fall { to { transform: translateY(110vh); } }

/* Card */
.card { max-width: 900px; margin: 40px auto; background: rgba(255,255,255,0.9); border-radius: 20px; padding: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.2); }

/* Envelope */
.envelope { border: 3px solid #c44; border-radius: 12px; padding: 20px; text-align: center; }
.envelope.open { background: #fff5f7; }
.script { font-family: 'Great Vibes', cursive; font-size: 32px; margin-top: 15px; }

/* Buttons */
button { background: #c44; color: white; border: none; padding: 10px 18px; border-radius: 20px; cursor: pointer; margin: 5px; }
button:hover { opacity: 0.9; }

/* Gallery */
.gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px,1fr)); gap: 10px; margin-top: 10px; }
.gallery img { width: 100%; border-radius: 12px; border: 6px solid transparent; }
.border-roses img { border-color: #ff5f7e; }
.border-lilies img { border-color: #fbc2eb; }

/* Countdown */
.countdown { font-size: 22px; margin: 15px 0; }

/* Map */
#map { background: #ffeef2; height: 250px; border-radius: 15px; position: relative; cursor: crosshair; }
.pin { position: absolute; transform: translate(-50%, -100%); font-size: 24px; }

/* Wax seals */
.seals span { font-size: 30px; cursor: pointer; margin: 0 5px; }
.seal-selected { font-size: 40px; }

/* Valentine Yes buttons */
#valentine-yes button { background: #ff577f; font-size: 20px; padding: 12px 20px; }
</style>
</head>

<body>

<div class="card">
  <h1 style="text-align:center;">ğŸ’– Happy Valentineâ€™s Day ğŸ’–</h1>

  <!-- Music -->
  <audio id="music" loop>
    <source src="piano.mp3" type="audio/mpeg">
  </audio>
  <button onclick="toggleMusic()">ğŸ¶ Music</button>

  <!-- Envelope -->
  <div class="envelope" id="envelope">
    <textarea id="messageInput" placeholder="Type your message here..." rows="3" style="width:100%;"></textarea><br>
    <button onclick="openEnvelope()">ğŸ’Œ Open Envelope</button>
    <div class="script" id="messageDisplay"></div>
  </div>

  <!-- Wax Seal -->
  <h3>Wax Seal</h3>
  <div class="seals">
    <span onclick="selectSeal(this)">â¤ï¸</span>
    <span onclick="selectSeal(this)">ğŸŒ¹</span>
    <span onclick="selectSeal(this)">ğŸ’</span>
  </div>
  <div id="sealDisplay"></div>

  <!-- Countdown -->
  <div class="countdown" id="countdown"></div>

  <!-- Poem -->
  <h3>Secret Romantic Poem</h3>
  <button onclick="generatePoem()">âœ¨ Generate Poem</button>
  <p id="poem"></p>

  <!-- Gallery -->
  <h3>Our Memories</h3>
  <select onchange="setBorder(this.value)">
    <option value="">No Border</option>
    <option value="border-roses">Roses</option>
    <option value="border-lilies">Lilies</option>
  </select>
  <input type="file" multiple accept="image/*" onchange="loadImages(event)">
  <div class="gallery" id="gallery"></div>

  <!-- Map -->
  <h3>Our Favorite Places</h3>
  <p>Click to pin a memory ğŸ’•</p>
  <div id="map" onclick="addPin(event)"></div>

  <!-- Valentine YES buttons -->
  <div id="valentine-yes" style="text-align:center; margin-top:20px;">
    <h2>Will you be my Valentine? ğŸ’–</h2>
    <button onclick="yesClicked()">Yes ğŸ˜</button>
    <button onclick="yesClicked()">Yes ğŸ˜</button>
  </div>
  <div id="valentine-response" style="text-align:center; font-size:24px; margin-top:20px;"></div>
</div>

<script>
/* Falling hearts */
for(let i=0;i<30;i++){
  let h=document.createElement("div");
  h.className="heart";
  h.innerHTML="â¤ï¸";
  h.style.left=Math.random()*100+"vw";
  h.style.animationDuration=(3+Math.random()*5)+"s";
  h.style.fontSize=(15+Math.random()*20)+"px";
  document.body.appendChild(h);
}

/* Envelope */
function openEnvelope(){
  document.getElementById("envelope").classList.add("open");
  document.getElementById("messageDisplay").innerText =
    document.getElementById("messageInput").value;
}

/* Music */
function toggleMusic(){
  const m=document.getElementById("music");
  if(m.src==="") return;
  m.paused ? m.play() : m.pause();
}

/* Countdown */
function updateCountdown(){
  const vday = new Date(new Date().getFullYear(),1,14);
  const now = new Date();
  const diff = vday - now;
  const d = Math.floor(diff/86400000);
  const h = Math.floor(diff/3600000)%24;
  const m = Math.floor(diff/60000)%60;
  document.getElementById("countdown").innerText =
    `â³ ${d} days ${h} hrs ${m} mins until Valentineâ€™s Day`;
}
setInterval(updateCountdown,1000);
updateCountdown();

/* Poems */
const poems=[
  "In every heartbeat there is you\nIn every dream my wish comes true",
  "If love were time Iâ€™d give you forever\nIf love were space weâ€™d drift together",
  "You are my quiet and my storm\nMy safest place my warmest form"
];
function generatePoem(){
  document.getElementById("poem").innerText =
    poems[Math.floor(Math.random()*poems.length)];
}

/* Gallery */
function loadImages(e){
  for(let file of e.target.files){
    const img=document.createElement("img");
    img.src=URL.createObjectURL(file);
    document.getElementById("gallery").appendChild(img);
  }
}
function setBorder(cls){
  document.getElementById("gallery").className="gallery "+cls;
}

/* Map */
function addPin(e){
  const pin=document.createElement("div");
  pin.className="pin";
  pin.innerHTML="ğŸ“";
  pin.style.left=e.offsetX+"px";
  pin.style.top=e.offsetY+"px";
  document.getElementById("map").appendChild(pin);
}

/* Wax seal */
function selectSeal(el){
  document.getElementById("sealDisplay").innerHTML =
    `<div class="seal-selected">${el.innerText}</div>`;
}

/* Valentine YES buttons */
function yesClicked() {
  const response = document.getElementById("valentine-response");
  response.innerHTML = "ğŸ’– Yay! I knew it! You just made my Valentineâ€™s Day magical! ğŸ’–";
  launchConfetti();
}

/* Confetti */
function launchConfetti() {
  for (let i = 0; i < 100; i++) {
    let conf = document.createElement("div");
    conf.innerHTML = "ğŸ‰";
    conf.style.position = "fixed";
    conf.style.left = Math.random() * window.innerWidth + "px";
    conf.style.top = Math.random() * window.innerHeight + "px";
    conf.style.fontSize = 15 + Math.random() * 20 + "px";
    conf.style.zIndex = 9999;
    document.body.appendChild(conf);
    setTimeout(() => conf.remove(), 2000);
  }
}
</script>
</body>
</html>
